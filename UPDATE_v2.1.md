# üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ v2.1 - –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Ä–æ–∫–æ–≤

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ —É—Ä–æ–∫–∏ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ (—Ç–æ–ª—å–∫–æ 1 –±–ª–æ–∫ –∏—Ç–æ–≥–æ–≤ —Å 2 –≤–æ–ø—Ä–æ—Å–∞–º–∏).

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —É—Ä–æ–∫–∞, —á—Ç–æ–±—ã AI —Å–æ–∑–¥–∞–≤–∞–ª –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏.

---

## ‚úÖ –ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É—Ä–æ–∫–∞–º

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):

```
1. Theory  - –í–≤–µ–¥–µ–Ω–∏–µ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
2. Question - –ü—Ä–∞–∫—Ç–∏–∫–∞ 1 (–º–∏–Ω–∏–º—É–º 2 –≤–æ–ø—Ä–æ—Å–∞)
3. Theory  - –£–≥–ª—É–±–ª–µ–Ω–∏–µ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)  
4. Question - –ü—Ä–∞–∫—Ç–∏–∫–∞ 2 (–º–∏–Ω–∏–º—É–º 2 –≤–æ–ø—Ä–æ—Å–∞)
5. Summary - –ò—Ç–æ–≥–∏ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
```

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞:

‚úÖ **–ú–∏–Ω–∏–º—É–º 5 –±–ª–æ–∫–æ–≤** (–º–µ–Ω—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è)  
‚úÖ **–ö–∞–∂–¥—ã–π question –±–ª–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º—É–º 2 –≤–æ–ø—Ä–æ—Å–∞**  
‚úÖ **–ö–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å –∏–º–µ–µ—Ç —Ä–æ–≤–Ω–æ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞**  
‚úÖ **correctAnswer –æ—Ç 0 –¥–æ 3**  
‚úÖ **–ö–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å –∏–º–µ–µ—Ç explanation**  

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (`Chat.tsx`)

**–ë—ã–ª–æ:**
```typescript
max_tokens: 2000
"–ü–ª–∞–Ω —É—Ä–æ–∫–∞ –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å 3-5 —à–∞–≥–æ–≤"
```

**–°—Ç–∞–ª–æ:**
```typescript
max_tokens: 3000
"–ü–ª–∞–Ω —É—Ä–æ–∫–∞ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –ú–ò–ù–ò–ú–£–ú 5 —à–∞–≥–æ–≤"
"–í –ö–ê–ñ–î–û–ú –±–ª–æ–∫–µ question –ú–ò–ù–ò–ú–£–ú 2 –≤–æ–ø—Ä–æ—Å–∞"
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è (`InteractiveLesson.tsx`)

–§—É–Ω–∫—Ü–∏—è `parseLessonFromAI` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –ú–∏–Ω–∏–º—É–º 5 —à–∞–≥–æ–≤
- ‚úÖ –ù–∞–ª–∏—á–∏–µ theory, question, summary
- ‚úÖ –ú–∏–Ω–∏–º—É–º 2 –≤–æ–ø—Ä–æ—Å–∞ –≤ –∫–∞–∂–¥–æ–º question –±–ª–æ–∫–µ
- ‚úÖ –†–æ–≤–Ω–æ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ correctAnswer –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-3

**–ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç:**
- –£—Ä–æ–∫ –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π
- –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã (`lessonParser.test.ts`)

–í—Å–µ —Ç–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ 5 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º 5 —à–∞–≥–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º 2 –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ –±–ª–æ–∫

---

## üìä –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–Ω–æ–≥–æ —É—Ä–æ–∫–∞

```json
[
  {
    "type": "theory",
    "title": "Present Simple - –í–≤–µ–¥–µ–Ω–∏–µ",
    "content": "Present Simple –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –§–æ—Ä–º—É–ª–∞: Subject + Verb (-s –¥–ª—è he/she/it)."
  },
  {
    "type": "question",
    "title": "–ü—Ä–∞–∫—Ç–∏–∫–∞: –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è",
    "content": "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ–æ—Ä–º—É:",
    "questions": [
      {
        "id": "q1",
        "question": "She ___ to school.",
        "options": ["go", "goes", "going", "went"],
        "correctAnswer": 1,
        "explanation": "–° 'she' –¥–æ–±–∞–≤–ª—è–µ–º -s."
      },
      {
        "id": "q2",
        "question": "They ___ English.",
        "options": ["studies", "study", "studying", "studied"],
        "correctAnswer": 1,
        "explanation": "–° 'they' –±–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º–∞."
      }
    ]
  },
  {
    "type": "theory",
    "title": "Present Simple - –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ",
    "content": "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ: don't/doesn't + –≥–ª–∞–≥–æ–ª. Don't –¥–ª—è I/you/we/they, doesn't –¥–ª—è he/she/it."
  },
  {
    "type": "question",
    "title": "–ü—Ä–∞–∫—Ç–∏–∫–∞: –û—Ç—Ä–∏—Ü–∞–Ω–∏—è",
    "content": "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ:",
    "questions": [
      {
        "id": "q3",
        "question": "We ___ pizza.",
        "options": ["don't like", "doesn't like", "not like", "aren't like"],
        "correctAnswer": 0,
        "explanation": "–° 'we' –∏—Å–ø–æ–ª—å–∑—É–µ–º don't."
      },
      {
        "id": "q4",
        "question": "He ___ coffee.",
        "options": ["don't drink", "doesn't drinks", "doesn't drink", "not drink"],
        "correctAnswer": 2,
        "explanation": "–° 'he' doesn't + –±–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º–∞."
      }
    ]
  },
  {
    "type": "summary",
    "title": "–ò—Ç–æ–≥–∏",
    "content": "–í—ã –∏–∑—É—á–∏–ª–∏ Present Simple: —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–¥–æ–±–∞–≤–ª—è–µ–º -s) –∏ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è (don't/doesn't). –û—Ç–ª–∏—á–Ω–æ!"
  }
]
```

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç—ã:
```bash
npm test -- src/utils/lessonParser.test.ts --run
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì 5 tests passed
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
npm run start:single-port
```

### 3. –°–æ–∑–¥–∞–π—Ç–µ —É—Ä–æ–∫:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:1031/
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ê–Ω–≥–ª–∏–π—Å–∫–∏–π)
3. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ"
4. –û—Ç–≤–µ—Ç—å—Ç–µ: "–Ø –≤ 9 –∫–ª–∞—Å—Å–µ, –∏–∑—É—á–∞–ª Past Simple"

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

**‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —É—Ä–æ–∫ —Å 5 –±–ª–æ–∫–∞–º–∏
- –ú–∏–Ω–∏–º—É–º 4 –≤–æ–ø—Ä–æ—Å–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä 20% ‚Üí 40% ‚Üí 60% ‚Üí 80% ‚Üí 100%

**‚ùå –ï—Å–ª–∏ —É—Ä–æ–∫ –∫–æ—Ä–æ—Ç–∫–∏–π:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- AI –≤–µ—Ä–Ω—É–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ —É—Ä–æ–∫ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
   ```
   Lesson must have at least 5 steps
   Each question block must have at least 2 questions
   Each question must have exactly 4 options
   correctAnswer must be between 0 and 3
   ```

3. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç AI:**
   - –í Network tab –Ω–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/chat/completions`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å JSON –º–∞—Å—Å–∏–≤

### –ï—Å–ª–∏ AI –Ω–µ —Å–æ–∑–¥–∞–µ—Ç JSON:

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±—ã—Ç—å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º:
```
‚ùå –ü–ª–æ—Ö–æ: "–Ø —É—á—É –∞–Ω–≥–ª–∏–π—Å–∫–∏–π"
‚úÖ –•–æ—Ä–æ—à–æ: "–Ø —É—á—É—Å—å –≤ 9 –∫–ª–∞—Å—Å–µ –∏ –∏–∑—É—á–∞–ª Present Simple"
```

---

## üìà –£–ª—É—á—à–µ–Ω–∏—è

### –£–≤–µ–ª–∏—á–µ–Ω—ã –ª–∏–º–∏—Ç—ã:
- `max_tokens`: 2000 ‚Üí 3000 (–±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É—Ä–æ–∫–∞)

### –£–ª—É—á—à–µ–Ω –ø—Ä–æ–º–ø—Ç:
- –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å 5 –±–ª–æ–∫–∞–º–∏
- –ß–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤–æ–ø—Ä–æ—Å–æ–≤
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤—ã–¥–µ–ª–µ–Ω—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏
- Graceful fallback (–æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ JSON –Ω–µ–≤–∞–ª–∏–¥–µ–Ω)

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

### –î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```
–£—Ä–æ–∫ –º–æ–≥ –∏–º–µ—Ç—å:
- 3 —à–∞–≥–∞
- 1 –≤–æ–ø—Ä–æ—Å –Ω–∞ –±–ª–æ–∫
- –í—Å–µ–≥–æ 2 –≤–æ–ø—Ä–æ—Å–∞
```

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```
–£—Ä–æ–∫ –î–û–õ–ñ–ï–ù –∏–º–µ—Ç—å:
- –ú–∏–Ω–∏–º—É–º 5 —à–∞–≥–æ–≤
- –ú–∏–Ω–∏–º—É–º 2 –≤–æ–ø—Ä–æ—Å–∞ –Ω–∞ –±–ª–æ–∫
- –í—Å–µ–≥–æ –º–∏–Ω–∏–º—É–º 4-6 –≤–æ–ø—Ä–æ—Å–æ–≤
```

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å AI —Å–æ–∑–¥–∞–µ—Ç **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏** –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é 5-7 –º–∏–Ω—É—Ç —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–∞–∫—Ç–∏–∫–∏!

---

**–í–µ—Ä—Å–∏—è:** 2.1  
**–î–∞—Ç–∞:** 11 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é



